<!DOCTYPE html>
<html lang="en-GB">
<head>
<meta charset="utf-8">
<title>Final Draft 4 - Elegant Scroll</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  background: #fff;
  color: #1a1a1a;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
}

/* Layout */
.page-wrapper {
  display: flex;
  min-height: 100vh;
}

/* Left Column - Sticky */
.left-column {
  width: 45%;
  max-width: 600px;
  position: sticky;
  top: 0;
  height: 100vh;
  display: flex;
  flex-direction: column;
  border-right: 1px solid #eee;
}

.back-link {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: #888;
  text-decoration: none;
  font-size: 0.8rem;
  padding: 20px 30px;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 500;
  cursor: pointer;
}
.back-link:hover { color: #1a1a1a; }

.image-section {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.main-image {
  flex: 0 0 auto;
  height: 45vh;
  overflow: hidden;
  margin: 0 30px;
  border-radius: 10px;
  position: relative;
}

/* Carousel */
.carousel-container {
  position: relative;
  width: 100%;
  height: 100%;
}

.carousel-slide {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  transition: opacity 0.4s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.carousel-slide.active {
  opacity: 1;
  z-index: 1;
}

.carousel-slide img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border-radius: 10px;
  cursor: pointer;
}

/* Carousel Arrows */
.carousel-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.95);
  border: none;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s ease, background 0.3s ease, transform 0.2s ease;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
}

.main-image:hover .carousel-arrow {
  opacity: 1;
}

.carousel-arrow:hover {
  background: #fff;
  transform: translateY(-50%) scale(1.1);
}

.carousel-arrow svg {
  width: 20px;
  height: 20px;
  stroke: #333;
  stroke-width: 2;
  fill: none;
}

.carousel-prev { left: 15px; }
.carousel-next { right: 15px; }

/* Carousel Dots */
.carousel-dots {
  position: absolute;
  bottom: 15px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  display: flex;
  gap: 8px;
  padding: 8px 12px;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 20px;
}

.carousel-dot {
  width: 8px;
  height: 8px;
  background: rgba(255, 255, 255, 0.5);
  border-radius: 50%;
  cursor: pointer;
  transition: background 0.3s ease, transform 0.2s ease;
}

.carousel-dot:hover {
  background: rgba(255, 255, 255, 0.8);
}

.carousel-dot.active {
  background: #fff;
  transform: scale(1.3);
}

.image-thumbs {
  display: flex;
  justify-content: center;
  gap: 10px;
  padding: 20px 30px;
}
.thumb {
  width: 70px;
  height: 50px;
  border-radius: 6px;
  overflow: hidden;
  cursor: pointer;
  opacity: 0.5;
  transition: all 0.2s;
  border: 2px solid transparent;
}
.thumb:hover, .thumb.active {
  opacity: 1;
  border-color: #1a1a1a;
}
.thumb img { width: 100%; height: 100%; object-fit: cover; border-radius: 4px; }

/* Lightbox */
.lightbox {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  z-index: 10000;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.lightbox.active {
  display: flex;
  opacity: 1;
}

.lightbox-content {
  position: relative;
  max-width: 90vw;
  max-height: 90vh;
}

.lightbox-content img {
  max-width: 90vw;
  max-height: 90vh;
  object-fit: contain;
  border-radius: 8px;
}

.lightbox-close {
  position: absolute;
  top: 20px;
  right: 20px;
  width: 50px;
  height: 50px;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
  z-index: 10001;
}

.lightbox-close:hover {
  background: rgba(255, 255, 255, 0.2);
}

.lightbox-close svg {
  width: 24px;
  height: 24px;
  stroke: #fff;
  stroke-width: 2;
}

.lightbox-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 50px;
  height: 50px;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
}

.lightbox-nav:hover {
  background: rgba(255, 255, 255, 0.2);
}

.lightbox-nav svg {
  width: 24px;
  height: 24px;
  stroke: #fff;
  stroke-width: 2;
  fill: none;
}

.lightbox-prev {
  left: 20px;
}

.lightbox-next {
  right: 20px;
}

/* About Section Under Image */
.about-section {
  flex: 1;
  padding: 25px 30px 30px;
  background: #fafafa;
  border-top: 1px solid #eee;
  overflow-y: auto;
}
.about-label {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: #999;
  margin-bottom: 12px;
  font-weight: 600;
}
.about-text {
  font-size: 0.95rem;
  line-height: 1.8;
  color: #555;
}

/* Right Column - Scrollable */
.right-column {
  flex: 1;
  overflow-y: auto;
  padding: 40px 50px 80px;
}

/* Header */
.listing-header {
  margin-bottom: 35px;
}

.model-title {
  font-family: 'Montserrat', sans-serif;
  font-size: 2.2rem;
  font-weight: 700;
  letter-spacing: -0.5px;
  margin-bottom: 12px;
}

.meta-row {
  display: flex;
  gap: 20px;
  color: #666;
  font-size: 0.9rem;
  margin-bottom: 15px;
}

.availability-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: #f0fdf4;
  color: #166534;
  padding: 6px 14px;
  border-radius: 4px;
  font-size: 0.7rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.availability-badge::before {
  content: '';
  width: 5px; height: 5px;
  background: #22c55e;
  border-radius: 50%;
}

/* Price - Subtle, not aggressive */
.price-section {
  display: flex;
  align-items: baseline;
  gap: 12px;
  padding-top: 20px;
  padding-bottom: 0;
  border-top: 1px solid #eee;
  margin-bottom: 25px;
}
.price {
  font-family: 'Montserrat', sans-serif;
  font-size: 1.7rem;
  font-weight: 700;
  color: #1a1a1a;
}
.price-note {
  font-size: 0.8rem;
  color: #888;
}

/* Section Headers */
.section-title {
  font-family: 'Montserrat', sans-serif;
  font-size: 0.7rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: #999;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 15px;
}

.section-title::after {
  content: '';
  flex: 1;
  height: 1px;
  background: #eee;
}

/* Specs */
.specs-section {
  margin-bottom: 40px;
}
.specs-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0;
  border: 1px solid #eee;
  border-radius: 10px;
  overflow: hidden;
}
.spec-item {
  padding: 16px 18px;
  background: #fafafa;
  border-bottom: 1px solid #eee;
  border-right: 1px solid #eee;
}
.spec-item:nth-child(even) { border-right: none; }
.spec-item:nth-last-child(-n+2) { border-bottom: none; }
.spec-label {
  font-size: 0.68rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #888;
  margin-bottom: 4px;
}
.spec-value {
  font-size: 0.95rem;
  font-weight: 600;
  color: #1a1a1a;
}

/* Equipment */
.equipment-section {
  margin-bottom: 40px;
}
.equipment-list {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}
.equipment-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: #f8f9fa;
  border-radius: 6px;
  font-size: 0.85rem;
  color: #444;
}
.equipment-item::before {
  content: '✓';
  color: #22c55e;
  font-weight: bold;
  font-size: 0.8rem;
}

/* Register Interest */
.register-interest {
  background: #f8f9fa;
  border-radius: 12px;
  padding: 25px;
  margin-top: 30px;
  border: 1px solid #ddd;
}
.register-header {
  display: flex;
  align-items: flex-start;
  gap: 15px;
  margin-bottom: 20px;
}
.register-icon {
  width: 44px;
  height: 44px;
  background: #1a1a1a;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.register-icon svg {
  width: 20px;
  height: 20px;
  stroke: #fff;
}
.register-info { flex: 1; }
.register-title {
  font-family: 'Montserrat', sans-serif;
  font-size: 0.95rem;
  font-weight: 600;
  margin-bottom: 6px;
}
.register-subtitle {
  font-size: 0.85rem;
  color: #666;
}

/* Call Office */
.call-office {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 18px;
  background: #fff;
  border-radius: 8px;
  margin-bottom: 15px;
  border: 1px solid #e5e5e5;
}
.call-icon {
  width: 36px;
  height: 36px;
  background: #f0fdf4;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.call-icon svg {
  width: 16px;
  height: 16px;
  stroke: #22c55e;
}
.call-info { flex: 1; }
.call-label {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #888;
  margin-bottom: 2px;
}
.call-number {
  font-family: 'Montserrat', sans-serif;
  font-size: 1rem;
  font-weight: 600;
  color: #1a1a1a;
  text-decoration: none;
}
.call-number:hover { color: #22c55e; }

.divider-or {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 15px;
  color: #999;
  font-size: 0.75rem;
}
.divider-or::before,
.divider-or::after {
  content: '';
  flex: 1;
  height: 1px;
  background: #ddd;
}

.register-form {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
.register-form input,
.register-form textarea {
  padding: 12px 16px;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-size: 0.9rem;
  font-family: inherit;
}
.register-form input:focus,
.register-form textarea:focus {
  outline: none;
  border-color: #1a1a1a;
}
.register-form input[type="email"],
.register-form input[type="tel"] {
  grid-column: 1 / -1;
}
.register-form textarea {
  grid-column: 1 / -1;
  min-height: 80px;
  resize: vertical;
}
.register-form button {
  grid-column: 1 / -1;
  padding: 14px 24px;
  background: #1a1a1a;
  color: #fff;
  border: none;
  border-radius: 6px;
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
}
.register-form button:hover { background: #333; }

/* Resize Handle - Base */
.resize-handle {
  position: fixed;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 32px;
  height: 32px;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

.resize-handle::before {
  content: '‹›';
  color: #555;
  font-size: 12px;
  width: 28px;
  height: 28px;
  background: #fff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  transition: box-shadow 0.15s;
}

.resize-handle:hover::before {
  box-shadow: 0 3px 12px rgba(0,0,0,0.2);
}

/* Download Button */
.download-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 20px;
  background: #fff;
  color: #1a1a1a;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
  margin-top: 20px;
  text-decoration: none;
  transition: all 0.2s;
}

.download-btn:hover {
  background: #1a1a1a;
  color: #fff;
  border-color: #1a1a1a;
}

.download-btn svg {
  width: 16px;
  height: 16px;
  stroke: currentColor;
  stroke-width: 2;
  fill: none;
}

/* Responsive */
@media (max-width: 900px) {
  .page-wrapper {
    flex-direction: column;
  }
  .left-column {
    width: 100%;
    max-width: none;
    height: auto;
    position: relative;
    border-right: none;
    border-bottom: 1px solid #eee;
  }
  .resize-handle {
    display: none;
  }
  .divider-picker {
    display: none;
  }
  .main-image {
    height: 35vh;
    min-height: 250px;
    margin: 0 20px;
  }
  .image-section {
    flex: 0 0 auto;
  }
  .about-section {
    flex: 0 0 auto;
  }
  .right-column {
    padding: 30px 25px 60px;
  }
  .model-title { font-size: 1.7rem; }
  .specs-grid { grid-template-columns: 1fr; }
  .spec-item { border-right: none !important; }
  .register-form { grid-template-columns: 1fr; }
}

@media (max-width: 480px) {
  .main-image {
    height: 30vh;
    min-height: 200px;
    margin: 0 15px;
  }
  .image-thumbs {
    padding: 15px;
  }
  .thumb {
    width: 55px;
    height: 40px;
  }
}

</style>
</head>
<body>

<div class="page-wrapper">
  <!-- Left Column - Sticky Image & About -->
  <div class="left-column">
    <a href="/used-aircraft-2" class="back-link">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
      Back to Listings
    </a>

    <div class="image-section">
      <div class="main-image">
        <div class="carousel-container">
          <div class="carousel-slide active" data-index="0">
            <img src="https://firebasestorage.googleapis.com/v0/b/hq-website-4abc7.firebasestorage.app/o/helicopters%2FG-HQAV%2Fblue-r66-palo-verde-front-v4.png?alt=media&token=3084cb09-4600-47bd-adf8-873b980b541d" alt="Robinson R66 Turbine">
          </div>
          <div class="carousel-slide" data-index="1">
            <img src="https://firebasestorage.googleapis.com/v0/b/hq-website-4abc7.firebasestorage.app/o/helicopters%2FG-HELI%2Fhq-0209.jpg?alt=media" alt="Interior View">
          </div>
          <div class="carousel-slide" data-index="2">
            <img src="https://firebasestorage.googleapis.com/v0/b/hq-website-4abc7.firebasestorage.app/o/helicopters%2FG-HELI%2Fhq-0213.jpg?alt=media" alt="Cockpit View">
          </div>

          <button class="carousel-arrow carousel-prev" aria-label="Previous image">
            <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"></polyline></svg>
          </button>
          <button class="carousel-arrow carousel-next" aria-label="Next image">
            <svg viewBox="0 0 24 24"><polyline points="9 6 15 12 9 18"></polyline></svg>
          </button>

          <div class="carousel-dots">
            <div class="carousel-dot active" data-index="0"></div>
            <div class="carousel-dot" data-index="1"></div>
            <div class="carousel-dot" data-index="2"></div>
          </div>
        </div>
      </div>
      <div class="image-thumbs">
        <div class="thumb active" data-index="0"><img src="https://firebasestorage.googleapis.com/v0/b/hq-website-4abc7.firebasestorage.app/o/helicopters%2FG-HQAV%2Fblue-r66-palo-verde-front-v4.png?alt=media&token=3084cb09-4600-47bd-adf8-873b980b541d" alt=""></div>
        <div class="thumb" data-index="1"><img src="https://firebasestorage.googleapis.com/v0/b/hq-website-4abc7.firebasestorage.app/o/helicopters%2FG-HELI%2Fhq-0209.jpg?alt=media" alt=""></div>
        <div class="thumb" data-index="2"><img src="https://firebasestorage.googleapis.com/v0/b/hq-website-4abc7.firebasestorage.app/o/helicopters%2FG-HELI%2Fhq-0213.jpg?alt=media" alt=""></div>
      </div>
    </div>

    <div class="about-section">
      <div class="about-label">About This Aircraft</div>
      <p class="about-text">
        For sale is a superb example of a Robinson R66 Turbine. This helicopter has accumulated 1,240 hours and retains 5 years of remaining service life. Finished in Robinson's dark continental blue metallic paint, maintained to the highest standards throughout.
      </p>
      <a href="#" class="download-btn" onclick="alert('Prospectus PDF would download here'); return false;">
        <svg viewBox="0 0 24 24">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        Download Prospectus
      </a>
    </div>
  </div>

  <!-- Resize Handle -->
  <div class="resize-handle" id="resize-handle"></div>

  <!-- Right Column - Scrollable Content -->
  <div class="right-column">
    <header class="listing-header">
      <h1 class="model-title">Robinson R66 Turbine</h1>
      <div class="meta-row">
        <span>2018</span>
        <span>G-SAPA</span>
        <span>1,240 Total Hours</span>
      </div>
      <div class="availability-badge">Available</div>
    </header>

    <div class="price-section">
      <div class="price">£650,000</div>
      <div class="price-note">Excluding VAT</div>
    </div>

    <div class="specs-section">
      <div class="section-title">Specifications</div>
      <div class="specs-grid">
        <div class="spec-item">
          <div class="spec-label">Year</div>
          <div class="spec-value">2018</div>
        </div>
        <div class="spec-item">
          <div class="spec-label">Registration</div>
          <div class="spec-value">G-SAPA</div>
        </div>
        <div class="spec-item">
          <div class="spec-label">Remaining Hours</div>
          <div class="spec-value">760</div>
        </div>
        <div class="spec-item">
          <div class="spec-label">Remaining Life</div>
          <div class="spec-value">5 Years</div>
        </div>
      </div>
    </div>

    <div class="equipment-section">
      <div class="section-title">Equipment & Features</div>
      <div class="equipment-list">
        <div class="equipment-item">Pop-out Floats</div>
        <div class="equipment-item">Corrosion Protection</div>
        <div class="equipment-item">Garmin G500H</div>
        <div class="equipment-item">Garmin GTN650</div>
        <div class="equipment-item">GTX345 Transponder</div>
        <div class="equipment-item">SAS Autopilot w/ EFIS</div>
        <div class="equipment-item">Auxiliary Fuel System</div>
        <div class="equipment-item">Heated Pitot Tube</div>
        <div class="equipment-item">5-Point Harness</div>
        <div class="equipment-item">Lithium Ion Battery</div>
        <div class="equipment-item">Halon Fire Extinguisher</div>
        <div class="equipment-item">USB Ports</div>
      </div>
    </div>

    <div class="register-interest">
      <div class="register-header">
        <div class="register-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 17H2a3 3 0 0 0 3-3V9a7 7 0 0 1 14 0v5a3 3 0 0 0 3 3zm-8.27 4a2 2 0 0 1-3.46 0"></path>
          </svg>
        </div>
        <div class="register-info">
          <div class="register-title">Register Your Interest</div>
          <div class="register-subtitle">Get in touch about this aircraft and similar listings</div>
        </div>
      </div>

      <div class="call-office">
        <div class="call-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
          </svg>
        </div>
        <div class="call-info">
          <div class="call-label">Call Our Sales Team</div>
          <a href="tel:+441234567890" class="call-number">+44 1234 567 890</a>
        </div>
      </div>

      <div class="divider-or">or send an enquiry</div>

      <form class="register-form">
        <input type="text" placeholder="First name" required>
        <input type="text" placeholder="Last name" required>
        <input type="email" placeholder="Email address" required>
        <input type="tel" placeholder="Phone number">
        <textarea placeholder="Tell us about your interest in this aircraft..."></textarea>
        <button type="submit">Submit Enquiry</button>
      </form>
    </div>
  </div>
</div>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
  <button class="lightbox-close" id="lightbox-close">
    <svg viewBox="0 0 24 24" fill="none">
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
  </button>
  <button class="lightbox-nav lightbox-prev" id="lightbox-prev">
    <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"></polyline></svg>
  </button>
  <div class="lightbox-content">
    <img id="lightbox-img" src="" alt="Full size image">
  </div>
  <button class="lightbox-nav lightbox-next" id="lightbox-next">
    <svg viewBox="0 0 24 24"><polyline points="9 6 15 12 9 18"></polyline></svg>
  </button>
</div>


<script>
// Image Gallery Carousel
(function() {
  const slides = document.querySelectorAll('.carousel-slide');
  const dots = document.querySelectorAll('.carousel-dot');
  const thumbs = document.querySelectorAll('.thumb');
  const prevBtn = document.querySelector('.carousel-prev');
  const nextBtn = document.querySelector('.carousel-next');
  let currentIndex = 0;

  // Lightbox elements
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  const lightboxClose = document.getElementById('lightbox-close');
  const lightboxPrev = document.getElementById('lightbox-prev');
  const lightboxNext = document.getElementById('lightbox-next');

  function goToSlide(index) {
    if (index < 0) index = slides.length - 1;
    if (index >= slides.length) index = 0;

    slides.forEach(s => s.classList.remove('active'));
    dots.forEach(d => d.classList.remove('active'));
    thumbs.forEach(t => t.classList.remove('active'));

    slides[index].classList.add('active');
    dots[index].classList.add('active');
    thumbs[index].classList.add('active');

    currentIndex = index;

    // Update lightbox image if open
    if (lightbox.classList.contains('active')) {
      lightboxImg.src = slides[currentIndex].querySelector('img').src;
    }
  }

  // Open lightbox when clicking carousel image
  slides.forEach(slide => {
    slide.querySelector('img').addEventListener('click', () => {
      lightboxImg.src = slide.querySelector('img').src;
      lightbox.classList.add('active');
      document.body.style.overflow = 'hidden';
    });
  });

  // Close lightbox
  function closeLightbox() {
    lightbox.classList.remove('active');
    document.body.style.overflow = '';
  }

  lightboxClose.addEventListener('click', closeLightbox);
  lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) closeLightbox();
  });

  // Lightbox navigation
  lightboxPrev.addEventListener('click', (e) => {
    e.stopPropagation();
    goToSlide(currentIndex - 1);
  });

  lightboxNext.addEventListener('click', (e) => {
    e.stopPropagation();
    goToSlide(currentIndex + 1);
  });

  // Keyboard navigation for lightbox
  document.addEventListener('keydown', (e) => {
    if (!lightbox.classList.contains('active')) return;
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowLeft') goToSlide(currentIndex - 1);
    if (e.key === 'ArrowRight') goToSlide(currentIndex + 1);
  });

  prevBtn.addEventListener('click', () => goToSlide(currentIndex - 1));
  nextBtn.addEventListener('click', () => goToSlide(currentIndex + 1));

  dots.forEach(dot => {
    dot.addEventListener('click', () => {
      goToSlide(parseInt(dot.dataset.index));
    });
  });

  thumbs.forEach(thumb => {
    thumb.addEventListener('click', () => {
      goToSlide(parseInt(thumb.dataset.index));
    });
  });
})();

// Resizable Columns
(function() {
  const handle = document.getElementById('resize-handle');
  const leftColumn = document.querySelector('.left-column');
  const wrapper = document.querySelector('.page-wrapper');

  if (!handle || !leftColumn) return;

  let isResizing = false;
  const minWidth = 300;
  const maxWidth = 700;

  // Position handle centered on the divider line
  function updateHandlePosition() {
    const leftRect = leftColumn.getBoundingClientRect();
    handle.style.left = leftRect.right + 'px';
  }

  // Initial position
  updateHandlePosition();

  handle.addEventListener('mousedown', (e) => {
    e.preventDefault();
    isResizing = true;
    handle.style.cursor = 'grabbing';
    document.body.style.cursor = 'grabbing';
    document.body.style.userSelect = 'none';
  });

  document.addEventListener('mousemove', (e) => {
    if (!isResizing) return;
    e.preventDefault();

    const wrapperRect = wrapper.getBoundingClientRect();
    let newWidth = e.clientX - wrapperRect.left;

    // Enforce limits
    newWidth = Math.max(minWidth, Math.min(maxWidth, newWidth));

    // Update immediately without transition
    leftColumn.style.width = newWidth + 'px';
    leftColumn.style.maxWidth = newWidth + 'px';
    handle.style.left = (wrapperRect.left + newWidth) + 'px';
  });

  document.addEventListener('mouseup', () => {
    if (isResizing) {
      isResizing = false;
      handle.style.cursor = 'pointer';
      document.body.style.cursor = '';
      document.body.style.userSelect = '';
    }
  });

  // Update on window resize
  window.addEventListener('resize', updateHandlePosition);
})();
</script>

</body>
</html>
