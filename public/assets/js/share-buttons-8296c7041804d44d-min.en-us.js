"use strict";(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["21977"],{678617:function(g,k,n){n.r(k),n.d(k,{destroyShareButtons:()=>r,initializeShareButtons:()=>s});var S=n(461761),E=n.n(S),h=n(311227),l=n(709665),u=n(877395);const c={CALLBACK_NAMESPACE:"SquarespaceShareButtonCounts"+Date.now(),SERVICE_NAMES:["facebook","linkedin","pinterest"],COUNT_KEYS:{facebook:["share","share_count"],linkedin:["count"],pinterest:["count"]},URL_KEYS:{facebook:"id",linkedin:"url",pinterest:"url"},API_BASE_URLS:{facebook:"https://graph.facebook.com/?id=",linkedin:"https://www.linkedin.com/countserv/count/share?url=",pinterest:"https://widgets.pinterest.com/v1/urls/count.json?source=6&url="}};function d(t,e){try{const i=t[c.URL_KEYS[e]],o=document.createElement("a");o.href=i;const p='.Share[data-item-path="'+o.pathname.replace(/^\/|\/$/g,"")+'"] .Share-buttons-item[data-service="'+e+'"]',_=E()(t,c.COUNT_KEYS[e])||0,A=document.querySelectorAll(p);Array.prototype.forEach.call(A,function(m){m.querySelector(".Share-buttons-item-count").innerHTML=_})}catch{}}window[c.CALLBACK_NAMESPACE]={facebook:function(t){d(t,"facebook")},linkedin:function(t){d(t,"linkedin")},pinterest:function(t){d(t,"pinterest")}};function L(t){this.Y=t.Y,this.container=t.container,this.like=t.like,this.ID=t.id,this.PATH=t.path,this.SHARE_LINK=window.Static.SQUARESPACE_CONTEXT.website.baseUrl+"/"+this.PATH,this.shareButtonClickHandler=this.shareButtonClickHandler.bind(this),this.onLike=this.onLike.bind(this),this.addToLocalStorage=this.addToLocalStorage.bind(this)}L.prototype={init:function(){c.SERVICE_NAMES.forEach(function(t){this.container.querySelector('.Share-buttons-item[data-service="'+t+'"]')&&this.getCount(t)},this),this.like&&(this.initializeLikes(),this.isInLocalStorage(this.like)&&this.like.classList.add("is-active")),this.container.addEventListener("click",this.shareButtonClickHandler)},destroy:function(){this.container.removeEventListener("click",this.shareButtonClickHandler)},getCount:function(t){const e=document.createElement("script");e.src=[c.API_BASE_URLS[t],this.SHARE_LINK,"&callback=",c.CALLBACK_NAMESPACE,".",t].join(""),document.body.appendChild(e),document.body.removeChild(e)},shareButtonClickHandler:function(t){t.preventDefault();let e=this.Y.one(t.target).ancestor(".Share-buttons-item",!0);!e||!e.getDOMNode()||(e=e.getDOMNode(),e.getAttribute("data-service")&&(this.like&&e===this.like?this.onLike():this.onShare(e)))},initializeLikes:function(){l.Z.getLikeCount(this.ID).then((function(t){this.syncLikes(t)}).bind(this)).catch((function(){this.syncLikes()}).bind(this))},syncLikes:function(t){const e=this.like.querySelector(".Share-buttons-item-label");t||(t=parseInt(this.like.getAttribute("data-like-count"),10)),e.innerHTML=(0,h._6)({one:"{%n} Like",other:"{%n} Likes"},t,null,{project:"scripts-v6-root",notes:"oldKey: shareLikes"}),this.like.setAttribute("data-like-count",t)},onLike:function(){this.like.classList.contains("is-active")||l.Z.like(this.ID).then((function(t){t.commited===!0&&(this.incrementLike(),this.addToLocalStorage(this.like)),t.error&&((0,u.z)()||this.Y.config.win.alert((0,h.t)("You need to enable cookies to be able to like something.",null,{project:"scripts-v6-root"})))}).bind(this)).catch(function(t){})},incrementLike:function(){let t=parseInt(this.like.getAttribute("data-like-count"),10);t+=1,this.like.classList.add("is-active"),this.syncLikes(t)},onShare:function(t){window.open(t.getAttribute("href"),(0,h.t)("Share",null,{project:"scripts-v6-root"}),"width=420,height=230,dialog");const e=t.querySelector(".Share-buttons-item-count");e&&(e.innerHTML=parseInt(e.innerHTML,10)+1)},onSharePopupClose:function(t,e){let i=0,o;o=setInterval((function(){(t.closed||i>150)&&(clearInterval(o),this.getCount(e)),i++}).bind(this),200)},getLocalStorageKey:function(t){const e=t.getAttribute("data-service");return t===this.like?"squarespace-likes":e?"squarespace-shares-"+e:null},isInLocalStorage:function(t){try{if(!localStorage||!JSON)return!1}catch{return!1}const e=this.getLocalStorageKey(t),i=JSON.parse(localStorage.getItem(e));if(i)return i[this.ID]===!0},addToLocalStorage:function(t){if(!this.Y.config.win.localStorage||!this.Y.config.win.JSON)return!1;const e=this.getLocalStorageKey(t),i=JSON.parse(localStorage.getItem(e))||{};i[this.ID]=!0,localStorage.setItem(e,JSON.stringify(i))},readCookie:function(t){const e=t+"=",i=document.cookie.split(";");for(let o=0;o<i.length;o++){let a=i[o];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(e)===0)return a.substring(e.length,a.length)}return null}};const f=[];function s(t){t.all(".Share").each(function(e){e=e.getDOMNode();const i=new L({Y:t,container:e,id:e.getAttribute("data-item-identifier"),path:e.getAttribute("data-item-path"),like:e.querySelector(".Share-buttons-item--like")});i.init(),f.push(i)})}function r(t){f.forEach(function(e){e.destroy()}),f.length=0}},709665:function(g,k,n){n.d(k,{Z:()=>f});var S=n(635066);const E=",",h=s=>S.default.post("/api/content-items/"+s+"/sentiment/like").then(r=>{let{data:t}=r;return t});let l=[],u=null;const c=()=>{const s=l.map(r=>r.itemId).join(E);S.default.get(`/api/blog-like-count/${s}`).then(r=>{let{data:t}=r;l.forEach(e=>{if(t.hasOwnProperty(e.itemId)){e.resolve(t[e.itemId]);return}e.reject()}),l=[],u=null})},d=s=>new Promise((r,t)=>{l.push({itemId:s,resolve:r,reject:t}),u!==null&&clearTimeout(u),u=setTimeout(c,100)}),f={like:h,getLikeCount:s=>d(s)}}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/4af32336e2c618cb/share-buttons-8296c7041804d44d-min.en-US.js.map